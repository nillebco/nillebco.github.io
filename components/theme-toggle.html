<div class="theme-button" style="position: fixed; top: 10px; right: 44px;">
  <button id="theme-button"><i id="theme-icon" class="fas fa-sun"></i></button>
</div>

<script>
  document.addEventListener('htmx:afterSettle', function(evt) {
    const toggleButton = document.getElementById('theme-button');
    const themeIcon = document.getElementById('theme-icon');

    // Update icon based on current theme
    function updateThemeIcon() {
      if (currentTheme() === 'dark-mode') {
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
      } else {
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
      }
    }

    if (toggleButton && !toggleButton.hasListener) {
      toggleButton.hasListener = true;
      toggleButton.addEventListener('click', () => {
        toggleTheme();
        updateThemeIcon();
      });

      // Set initial icon state
      updateThemeIcon();
    }
  });
</script> 